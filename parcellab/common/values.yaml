# Default values (to be defined in the caller chart based on the resources they use)
affinity: {}
disableReplicaCount: false
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 10
  targetCPUUtilizationPercentage: 80
config: {}
containerEnv: {}
# Global deployment annotations that will be applied to all deployments
# These can be overridden by service-specific annotations
deploymentAnnotations: {}
argoRollout:
  enabled: false
datadog:
  enabled: false
env: prod
externalSecret: {}
# imagePullSecrets: []
image:
  pullPolicy: IfNotPresent
  tag: stable
ingress:
  enabled: false

##
## Envoy Gateway Resources
##

# HTTPRoute - Configure routing through Envoy Gateway
httproute:
  enabled: false
  # parentGateway: gateway-api
  # parentGatewayNamespace: envoy-gateway
  # hosts:
  #   - myapp.gateway.test.parcellab.dev
  # path: /

# ReferenceGrant - Allow cross-namespace references
referenceGrant:
  enabled: false
  # Automatically allows HTTPRoute and SecurityPolicy from current namespace
  # to reference Gateway and Secret in envoy-gateway namespace

# SecurityPolicy - OIDC Authentication with Group-Based Authorization
# Example: Employee-Only App
securityPolicy:
  enabled: false
  # name: employee-only  # Optional: custom name
  # targetRef:
  #   kind: HTTPRoute
  #   name: myapp  # Optional: defaults to release name
  # oidc:
  #   provider:
  #     issuer: "https://auth.test.parcellab.dev/realms/parcellab-internal"
  #   clientID: "envoy-gateway-client"
  #   clientSecret:
  #     name: "keycloak-oidc-secret"
  #     namespace: "envoy-gateway"
  #   redirectURL: "https://myapp.gateway.test.parcellab.dev/oauth2/callback"
  #   logoutPath: "/logout"
  #   scopes:
  #     - openid
  #     - profile
  #     - email
  #   cookieDomain: "myapp.gateway.test.parcellab.dev"
  #   forwardAccessToken: true
  #   passThroughAuthHeader: true
  # jwt:
  #   optional: false
  #   providers:
  #     - name: keycloak
  #       issuer: "https://auth.test.parcellab.dev/realms/parcellab-internal"
  #       remoteJWKS:
  #         uri: "https://auth.test.parcellab.dev/realms/parcellab-internal/protocol/openid-connect/certs"
  #         cacheDuration: 300s
  #       claimToHeaders:
  #         - header: "x-user-email"
  #           claim: "email"
  #         - header: "x-user-groups"
  #           claim: "groups"
  #         - header: "x-user-id"
  #           claim: "sub"
  # authorization:
  #   defaultAction: Deny
  #   rules:
  #     - name: allow-employees
  #       action: Allow
  #       principal:
  #         jwt:
  #           provider: keycloak
  #           claims:
  #             - name: groups
  #               valueType: StringArray
  #               values:
  #                 - "/parcellab-employee"

name: common
terminationGracePeriodSeconds: 30
nodeSelector: {}
orgRepository: ghcr.io/parcellab
podAnnotations: {}
podDisruptionBudget:
  enabled: false
  spec:
    maxUnavailable: "50%"
podSecurityContext: {}
replicaCount: 1
revisionHistoryLimit: 0
strategy: {}
resources: {}
securityContext: {}
serviceAccount:
  create: false
service:
  name: "http"
  port: 80
  protocol: "TCP"
  targetPort: "http"
  type: "ClusterIP"
  # extraPorts:
  # - name: https
  #   port: 443
  #   targetPort: https
  #   protocol: TCP
  # - name: metrics
  #   port: 9100
  #   targetPort: metrics
  #   protocol: TCP
tolerations: []
vpa:
  enabled: false
  mode: "Auto"
initContainers: []
extraContainers: []
