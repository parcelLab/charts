################################################################################
#              DO NOT EDIT THIS FILE (Auto-Generated) - COPY IT!               #
#                                                                              #
# Contents of this file were generated by https://github.com/parcelLab/.github #
# Changes to this file may be overwritten.                                     #
#                                                                              #
# Copy this file into the repo .github/workflows folder and edit it based on   #
# your needs to create a new workflow.                                         #
################################################################################
name: Deployment Trigger
on:
  push:
    tags:
      - "v*"
  workflow_dispatch:
    inputs:
      author:
        description: The owner of the deployment change
        required: false
        default: parcellab-dev-bot
      env:
        description: The environment where to deploy
        required: false
        default: test
      description:
        description: The information about the deployment change
        required: false
        default: Manual deployment in github actions
      ref:
        description: The github ref to deploy
        required: false
        default: main
jobs:
  from-dispatch:
    if: github.event_name == 'workflow_dispatch'
    uses: ./.github/workflows/_deployment-trigger.yaml
    with:
      author: ${{ github.event.inputs.author }}
      description: ${{ github.event.inputs.description }}
      env: ${{ github.event.inputs.env }}
      ref: ${{ github.event.inputs.ref }}
    secrets: inherit
  from-tag:
    if: github.event_name == 'push'
    uses: ./.github/workflows/_deployment-trigger.yaml
    with:
      author: ${{ github.event.pusher.name }}
      description: ${{ toJSON(github.event.head_commit.message) }}
      env: prod
      ref: ${{ github.ref }}
    secrets: inherit
